<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
    </head>

    <body>
        <script>
            function getComputerChoice(){
                let randVar = Math.floor(Math.random() * 3); //return random variable from 0-2
                if(randVar == 0) return "rock";
                if(randVar == 1) return "paper";
                if(randVar == 2) return "scissor";
            }

            function getPlayerChoice(){
                let userInput = prompt("What is your choice?");

                if(userInput === '' || userInput === null){ //empty string = '' and esc = null
                    return "invalid";
                }
                else if(userInput.toLowerCase() === "rock" || userInput.toLowerCase() === "paper" || userInput.toLowerCase() === "scissor"){
                    return userInput.toLowerCase();
                }
                else{
                    return "invalid";
                }
            }

            function playRound(playerSelection, computerSelection){
                if(playerSelection === "invalid") return playerSelection;

                else if(playerSelection === computerSelection) return "tie";

                else if (playerSelection === "rock"){
                    if(computerSelection === "paper") return `lose: ${computerSelection} beats ${playerSelection}`;
                    if(computerSelection === "scissor") return `win: ${playerSelection} beats ${computerSelection}`;
                }
                else if(playerSelection === "paper"){
                    if(computerSelection === "rock") return `win: ${playerSelection} beats ${computerSelection}`;
                    if(computerSelection === "scissor") return `lose: ${computerSelection} beats ${playerSelection}`;
                }
                else if(playerSelection === "scissor"){
                    if(computerSelection === "rock") return `lose: ${computerSelection} beats ${playerSelection}`;
                    if(computerSelection === "paper") return `win: ${playerSelection} beats ${computerSelection}`;
                }
            }

            function game(){
                let compScore = 0;
                let playerScore = 0;
                let tieRound = 0;

                for(let i = 0; i < 5; i++){
                    result = playRound(getPlayerChoice(), getComputerChoice());
                    console.log(result);
                    result = result.split(":"); //Split result into array. Either can be: win, lose, tie, or invalid. If invalid, no one wins.
                    if(result[0] === "win") playerScore++;
                    if(result[0] === "lose") compScore++;
                    if(result[0] === "tie") tieRound++;
                }

                if(playerScore > compScore) console.log(`You Win!\nPlayer Score: ${playerScore}\nComputer Score: ${compScore}\nTie Rounds: ${tieRound}`);
                else if(playerScore === compScore) console.log(`Tie!\nPlayer Score: ${playerScore}\nComputer Score: ${compScore}\nTie Rounds: ${tieRound}`);
                else if(playerScore < compScore) console.log(`You Lose!\nPlayer Score: ${playerScore}\nComputer Score: ${compScore}\nTie Rounds: ${tieRound}`);
            }

            game();

        </script>
    </body>

</html>